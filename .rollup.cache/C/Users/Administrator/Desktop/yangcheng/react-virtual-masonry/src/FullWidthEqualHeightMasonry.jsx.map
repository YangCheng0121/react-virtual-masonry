{"version":3,"file":"FullWidthEqualHeightMasonry.jsx","sourceRoot":"","sources":["FullWidthEqualHeightMasonry.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, {\n  useState,\n  useEffect,\n  useMemo,\n  useRef,\n  useLayoutEffect,\n  useCallback,\n} from \"react\";\n\ntype FullWidthEqualHeightMasonryCoreProps = {\n  items: any[];\n  renderItem: (\n    item: {\n      x: number;\n      y: number;\n      width: number;\n      height: number;\n      [key: string]: any;\n    },\n    index: number,\n  ) => React.ReactNode;\n  onLoadMore?: () => void;\n  targetRowHeight?: number;\n  gap?: number;\n  buffer?: number;\n  hasMore?: boolean;\n  loading?: boolean;\n  sizeRange?: [number, number];\n  maxItemWidth?: number;\n  maxStretchRatio?: number;\n  loadMoreThreshold?: number;\n};\n\nconst GAP = 8;\n\n// RAF 节流 Hook\nfunction useRafThrottle<T>(value: T): T {\n  const [throttledValue, setThrottledValue] = useState(value);\n  const rafRef = useRef<number>();\n\n  useEffect(() => {\n    if (rafRef.current) {\n      cancelAnimationFrame(rafRef.current);\n    }\n\n    rafRef.current = requestAnimationFrame(() => {\n      setThrottledValue(value);\n    });\n\n    return () => {\n      if (rafRef.current) {\n        cancelAnimationFrame(rafRef.current);\n      }\n    };\n  }, [value]);\n\n  return throttledValue;\n}\n\n// ==================== 布局算法 Hook ====================\nfunction useFullWidthFillMasonry(\n  items: any[],\n  containerWidth: number,\n  targetRowHeight = 245,\n  gap = GAP,\n  sizeRange: [number, number] = [230, 260],\n  maxItemWidth = 975,\n  maxStretchRatio = 1.5,\n) {\n  const layout = useMemo(() => {\n    if (!containerWidth || items.length === 0) return [];\n\n    const positioned: any[] = [];\n    const [minHeight, maxHeight] = sizeRange;\n    let y = 0;\n\n    let i = 0;\n\n    while (i < items.length) {\n      let currentRow: any[] = [];\n\n      let effectiveTargetRowHeight = targetRowHeight;\n\n      if (i < items.length) {\n        currentRow.push(items[i]);\n        i++;\n      }\n\n      const isLastItem = i >= items.length;\n      if (!isLastItem && currentRow.length === 1) {\n        const firstItem = currentRow[0];\n        const secondItem = items[i];\n\n        let firstWidth = firstItem.widthRatio * targetRowHeight;\n        let secondWidth = secondItem.widthRatio * targetRowHeight;\n        let totalWidth = firstWidth + secondWidth + gap;\n\n        if (totalWidth > containerWidth) {\n          effectiveTargetRowHeight =\n            (containerWidth - gap) /\n            (firstItem.widthRatio + secondItem.widthRatio);\n\n          effectiveTargetRowHeight = Math.min(\n            effectiveTargetRowHeight,\n            targetRowHeight,\n          );\n        }\n      }\n\n      while (i < items.length) {\n        const item = items[i];\n        const idealWidth = item.widthRatio * effectiveTargetRowHeight;\n\n        if (currentRow.length === 1) {\n          currentRow.push(item);\n          i++;\n        } else {\n          const currentRowWidth = currentRow.reduce((sum, rowItem) => {\n            return sum + rowItem.widthRatio * effectiveTargetRowHeight;\n          }, 0);\n\n          const totalWidthWithNew = currentRowWidth + idealWidth;\n          const totalGaps = currentRow.length * gap;\n\n          const requiredWidth = totalWidthWithNew + totalGaps;\n\n          const currentTotalWidth =\n            currentRowWidth + (currentRow.length - 1) * gap;\n\n          if (requiredWidth <= containerWidth) {\n            currentRow.push(item);\n            i++;\n          } else {\n            const scaleWithNew =\n              containerWidth / (totalWidthWithNew + totalGaps);\n            const scaleCurrent = containerWidth / currentTotalWidth;\n\n            if (\n              Math.abs(scaleWithNew - 1) < Math.abs(scaleCurrent - 1) &&\n              scaleWithNew <= maxStretchRatio\n            ) {\n              currentRow.push(item);\n              i++;\n            }\n            break;\n          }\n        }\n      }\n\n      const isLastRow = i >= items.length;\n      const totalGaps = (currentRow.length - 1) * gap;\n      const availableWidth = containerWidth - totalGaps;\n\n      const idealTotalWidthForScale = currentRow.reduce((sum, item) => {\n        return sum + item.widthRatio * effectiveTargetRowHeight;\n      }, 0);\n\n      let scale = availableWidth / idealTotalWidthForScale;\n\n      let adjustedRowHeight = effectiveTargetRowHeight * scale;\n\n      if (isLastRow) {\n        adjustedRowHeight = Math.min(\n          Math.max(adjustedRowHeight, minHeight),\n          targetRowHeight,\n        );\n      } else {\n        if (scale > maxStretchRatio) {\n          if (currentRow.length > 2) {\n            i--;\n            currentRow.pop();\n\n            const newTotalGaps = (currentRow.length - 1) * gap;\n            const newAvailableWidth = containerWidth - newTotalGaps;\n            const newIdealWidth = currentRow.reduce((sum, item) => {\n              return sum + item.widthRatio * effectiveTargetRowHeight;\n            }, 0);\n            scale = newAvailableWidth / newIdealWidth;\n            adjustedRowHeight = effectiveTargetRowHeight * scale;\n          }\n        }\n\n        adjustedRowHeight = Math.min(\n          Math.max(adjustedRowHeight, minHeight),\n          maxHeight,\n        );\n      }\n\n      let x = 0;\n\n      const idealWidths = currentRow.map(\n        (item) => item.widthRatio * adjustedRowHeight,\n      );\n\n      const idealTotalWidth = idealWidths.reduce((sum, w) => sum + w, 0);\n\n      if (isLastRow) {\n        const totalGapsWidth = (currentRow.length - 1) * gap;\n        const totalRequiredWidth = idealTotalWidth + totalGapsWidth;\n\n        if (totalRequiredWidth > containerWidth) {\n          const scale = (containerWidth - totalGapsWidth) / idealTotalWidth;\n          let remainingWidth = containerWidth;\n\n          currentRow.forEach((item, index) => {\n            const isLast = index === currentRow.length - 1;\n            let finalWidth: number;\n\n            if (isLast) {\n              finalWidth = remainingWidth;\n            } else {\n              finalWidth = Math.round(idealWidths[index] * scale);\n              finalWidth = Math.min(finalWidth, maxItemWidth);\n            }\n\n            positioned.push({\n              ...item,\n              x,\n              y,\n              width: finalWidth,\n              height: Math.round(adjustedRowHeight),\n            });\n\n            x += finalWidth + gap;\n            remainingWidth -= finalWidth + gap;\n          });\n        } else {\n          currentRow.forEach((item, index) => {\n            const idealWidth = idealWidths[index];\n            const finalWidth = Math.min(Math.round(idealWidth), maxItemWidth);\n\n            positioned.push({\n              ...item,\n              x,\n              y,\n              width: finalWidth,\n              height: Math.round(adjustedRowHeight),\n            });\n\n            x += finalWidth + gap;\n          });\n        }\n      } else {\n        let remainingWidth = containerWidth;\n        let accumulatedIdealWidth = 0;\n\n        currentRow.forEach((item, index) => {\n          const isLast = index === currentRow.length - 1;\n          let finalWidth: number;\n\n          if (isLast) {\n            finalWidth = remainingWidth;\n          } else {\n            const currentIdealWidth = idealWidths[index];\n            accumulatedIdealWidth += currentIdealWidth;\n\n            const targetX =\n              (accumulatedIdealWidth / idealTotalWidth) * containerWidth -\n              index * gap;\n\n            finalWidth = Math.round(targetX - x);\n\n            finalWidth = Math.min(finalWidth, maxItemWidth);\n          }\n\n          positioned.push({\n            ...item,\n            x,\n            y,\n            width: finalWidth,\n            height: Math.round(adjustedRowHeight),\n          });\n\n          x += finalWidth + gap;\n          remainingWidth -= finalWidth + gap;\n        });\n      }\n\n      y += Math.round(adjustedRowHeight) + gap;\n    }\n\n    return positioned;\n  }, [\n    items,\n    containerWidth,\n    targetRowHeight,\n    gap,\n    sizeRange,\n    maxItemWidth,\n    maxStretchRatio,\n  ]);\n\n  const totalHeight = useMemo(() => {\n    if (layout.length === 0) return 0;\n    return layout.reduce((max, item) => Math.max(max, item.y + item.height), 0);\n  }, [layout]);\n\n  return { layout, totalHeight };\n}\n\n// ==================== 主组件 ====================\nexport function FullWidthEqualHeightMasonryCore({\n  items,\n  renderItem,\n  onLoadMore,\n  targetRowHeight = 245,\n  gap = GAP,\n  buffer = 1000,\n  hasMore = true,\n  loading = false,\n  sizeRange = [230, 260],\n  maxItemWidth = 975,\n  maxStretchRatio = 1.5,\n  loadMoreThreshold = 800,\n}: FullWidthEqualHeightMasonryCoreProps) {\n  const [containerWidth, setContainerWidth] = useState(0);\n  const [scrollTop, setScrollTop] = useState(0);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const loadMoreTriggerRef = useRef<HTMLDivElement>(null);\n  const [containerOffsetTop, setContainerOffsetTop] = useState(0);\n\n  const throttledScrollTop = useRafThrottle(scrollTop);\n\n  useLayoutEffect(() => {\n    if (!containerRef.current) return;\n\n    setContainerOffsetTop(containerRef.current.offsetTop);\n\n    const ro = new ResizeObserver(() => {\n      if (containerRef.current) {\n        setContainerWidth(containerRef.current.clientWidth);\n      }\n    });\n\n    ro.observe(containerRef.current);\n    setContainerWidth(containerRef.current.clientWidth);\n\n    return () => ro.disconnect();\n  }, []);\n\n  const { layout, totalHeight } = useFullWidthFillMasonry(\n    items,\n    containerWidth,\n    targetRowHeight,\n    gap,\n    sizeRange,\n    maxItemWidth,\n    maxStretchRatio,\n  );\n\n  const handleScroll = useCallback(() => {\n    const scrollY = window.scrollY || window.pageYOffset;\n    setScrollTop(Math.max(0, scrollY - containerOffsetTop));\n  }, [containerOffsetTop]);\n\n  useEffect(() => {\n    window.addEventListener(\"scroll\", handleScroll, { passive: true });\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, [handleScroll]);\n\n  useEffect(() => {\n    if (!onLoadMore || !hasMore || loading) return;\n\n    const trigger = loadMoreTriggerRef.current;\n    if (!trigger) return;\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        if (entries[0].isIntersecting) {\n          onLoadMore();\n        }\n      },\n      { rootMargin: `${loadMoreThreshold}px` },\n    );\n\n    observer.observe(trigger);\n    return () => observer.disconnect();\n  }, [onLoadMore, hasMore, loading, loadMoreThreshold]);\n\n  const visibleItems = useMemo(() => {\n    return layout\n      .map((item, originalIndex) => ({ ...item, originalIndex }))\n      .filter((item) => {\n        const viewTop = throttledScrollTop - buffer;\n        const viewBottom = throttledScrollTop + window.innerHeight + buffer;\n        return item.y + item.height >= viewTop && item.y <= viewBottom;\n      });\n  }, [layout, throttledScrollTop, buffer]);\n\n  return (\n    <div\n      ref={containerRef}\n      style={{\n        position: \"relative\",\n        width: \"100%\",\n        minHeight: totalHeight,\n      }}\n    >\n      {visibleItems.map((item) => (\n        <React.Fragment key={item.originalIndex}>\n          {renderItem(item, item.originalIndex)}\n        </React.Fragment>\n      ))}\n\n      {onLoadMore && (\n        <div\n          ref={loadMoreTriggerRef}\n          style={{\n            position: \"absolute\",\n            bottom: 0,\n            left: 0,\n            right: 0,\n            height: 1,\n            pointerEvents: \"none\",\n          }}\n        />\n      )}\n    </div>\n  );\n}\n\n// ==================== Props 类型定义 ====================\ntype FullWidthEqualHeightMasonryProps = {\n  mapSize?: (raw: any) => { width: number; height: number };\n  renderItem: (\n    item: {\n      x: number;\n      y: number;\n      width: number;\n      height: number;\n      [key: string]: any;\n    },\n    index: number,\n  ) => React.ReactNode;\n  enableAnimation?: boolean;\n  loadData?: (\n    page: number,\n    pageSize: number,\n  ) => Promise<{\n    data: any[];\n    hasMore: boolean;\n  }>;\n  pageSize?: number;\n  targetRowHeight?: number;\n  sizeRange?: [number, number];\n  maxItemWidth?: number;\n  maxStretchRatio?: number;\n  gap?: number;\n  buffer?: number;\n  loadMoreThreshold?: number;\n};\n\nexport default function FullWidthEqualHeightMasonry({\n  mapSize,\n  renderItem,\n  enableAnimation: _enableAnimation = true,\n  loadData,\n  pageSize = 50,\n  targetRowHeight = 245,\n  sizeRange = [230, 260],\n  maxItemWidth = 975,\n  maxStretchRatio = 1.5,\n  gap = GAP,\n  buffer = 1500,\n  loadMoreThreshold = 500,\n}: FullWidthEqualHeightMasonryProps) {\n  const [items, setItems] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true); // 初始设为 true，立即显示 Loader\n  const [hasMore, setHasMore] = useState(true);\n  const [page, setPage] = useState(1);\n\n  // 防止重复初始加载\n  const initialLoadRef = useRef(false);\n\n  const defaultMapSize = (d: any) => ({\n    width: d.width ?? d.w ?? d.imgW,\n    height: d.height ?? d.h ?? d.imgH,\n  });\n\n  // 使用 ref 存储最新的函数引用，避免依赖变化\n  const loadDataRef = useRef(loadData);\n  const mapSizeRef = useRef(mapSize);\n\n  useEffect(() => {\n    loadDataRef.current = loadData;\n    mapSizeRef.current = mapSize;\n  }, [loadData, mapSize]);\n\n  const handleLoadMore = useCallback(\n    (force = false) => {\n      // force 参数用于初始加载时跳过 loading 检查\n      if (!force && loading) return;\n\n      setLoading(true);\n\n      if (loadDataRef.current) {\n        loadDataRef\n          .current(page, pageSize)\n          .then(({ data, hasMore: more }) => {\n            const effectiveMapSize = mapSizeRef.current ?? defaultMapSize;\n\n            setItems((prev) => [\n              ...prev,\n              ...data.map((d) => {\n                const { width, height } = effectiveMapSize(d);\n                return {\n                  ...d,\n                  width,\n                  height,\n                  widthRatio: width / height,\n                };\n              }),\n            ]);\n            setHasMore(more);\n            setPage((prev) => prev + 1);\n          })\n          .catch((error) => {\n            console.error(\"Failed to load data:\", error);\n          })\n          .finally(() => {\n            setLoading(false);\n          });\n      }\n    },\n    [loading, page, pageSize],\n  );\n\n  // 初始加载 - 使用 ref 防止重复调用\n  useEffect(() => {\n    if (!initialLoadRef.current && items.length === 0) {\n      initialLoadRef.current = true;\n      handleLoadMore(true); // 传入 force = true，跳过 loading 检查\n    }\n  }, [handleLoadMore, items.length]);\n\n  return (\n    <FullWidthEqualHeightMasonryCore\n      items={items}\n      renderItem={renderItem}\n      onLoadMore={handleLoadMore}\n      targetRowHeight={targetRowHeight}\n      sizeRange={sizeRange}\n      maxItemWidth={maxItemWidth}\n      maxStretchRatio={maxStretchRatio}\n      gap={gap}\n      buffer={buffer}\n      hasMore={hasMore}\n      loading={loading}\n      loadMoreThreshold={loadMoreThreshold}\n    />\n  );\n}"]}